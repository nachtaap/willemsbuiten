<!DOCTYPE html>

<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A58 Tilburg - Emissie en Geluid Analyse Rapport</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        @media print {
            body { margin: 0; }
            .page-break { page-break-before: always; }
            .no-print { display: none; }
        }

```
    body {
        font-family: 'Arial', sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 10px;
        background: white;
        color: #333;
        font-size: 14px;
    }
    
    .container {
        max-width: 100%;
        margin: 0 auto;
        background: white;
    }
    
    @media (min-width: 768px) {
        body {
            padding: 20px;
            font-size: 12pt;
        }
        .container {
            max-width: 210mm;
        }
    }
    
    .header {
        text-align: center;
        border-bottom: 3px solid #2c3e50;
        padding-bottom: 20px;
        margin-bottom: 30px;
    }
    
    h1 {
        color: #2c3e50;
        font-size: 20px;
        margin: 0;
        text-align: center;
    }
    
    .subtitle {
        color: #7f8c8d;
        font-size: 14px;
        margin: 10px 0 0 0;
        text-align: center;
    }
    
    @media (min-width: 768px) {
        h1 {
            font-size: 24pt;
        }
        .subtitle {
            font-size: 14pt;
        }
    }
    
    .report-info {
        display: block;
        margin-bottom: 20px;
        background: #f8f9fa;
        padding: 15px;
        border-radius: 5px;
    }
    
    @media (min-width: 768px) {
        .report-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
    }
    
    .info-box {
        border-left: 4px solid #3498db;
        padding-left: 15px;
    }
    
    .info-box h3 {
        margin: 10px 0 10px 0;
        color: #2c3e50;
        font-size: 16px;
    }
    
    @media (min-width: 768px) {
        .info-box h3 {
            margin: 0 0 10px 0;
            font-size: 14pt;
        }
    }
    
    .summary-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        font-size: 11px;
    }
    
    .summary-table th,
    .summary-table td {
        border: 1px solid #ddd;
        padding: 6px 4px;
        text-align: left;
        word-wrap: break-word;
        vertical-align: top;
        line-height: 1.3;
    }
    
    .summary-table th {
        background: #3498db;
        color: white;
        font-weight: bold;
        font-size: 10px;
        padding: 8px 4px;
    }
    
    @media (min-width: 768px) {
        .summary-table {
            font-size: inherit;
        }
        .summary-table th,
        .summary-table td {
            padding: 12px;
        }
        .summary-table th {
            font-size: inherit;
        }
    }
    
    .summary-table th {
        background: #3498db;
        color: white;
        font-weight: bold;
    }
    
    .summary-table tr:nth-child(even) {
        background: #f8f9fa;
    }
    
    .charts-section {
        margin: 30px 0;
    }
    
    .chart-container {
        margin: 20px 0;
        text-align: center;
    }
    
    .chart-title {
        font-size: 16px;
        font-weight: bold;
        margin: 20px 0 10px 0;
        color: #2c3e50;
    }
    
    .chart-canvas {
        max-width: 100%;
        height: 150px !important;
        max-height: 150px;
    }
    
    @media (min-width: 768px) {
        .chart-canvas {
            height: 300px !important;
            max-height: 300px;
        }
    }
    
    .results-grid {
        display: block;
        margin: 20px 0;
    }
    
    .result-box {
        background: #ecf0f1;
        padding: 15px;
        border-radius: 5px;
        border-left: 4px solid #3498db;
        margin-bottom: 15px;
    }
    
    .result-box h3 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 16px;
    }
    
    .big-number {
        font-size: 24px;
        font-weight: bold;
        color: #3498db;
        margin: 10px 0;
    }
    
    @media (min-width: 768px) {
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .result-box {
            margin-bottom: 0;
        }
        .big-number {
            font-size: 24pt;
        }
    }
    
    .methodology {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 5px;
        margin: 30px 0;
    }
    
    .methodology h2 {
        color: #2c3e50;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
    }
    
    .assumptions-list {
        display: block;
        margin: 20px 0;
    }
    
    .assumption-group {
        background: white;
        padding: 15px;
        border-radius: 5px;
        border-left: 4px solid #e74c3c;
        margin-bottom: 15px;
    }
    
    @media (min-width: 768px) {
        .assumptions-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .assumption-group {
            margin-bottom: 0;
        }
    }
    
    .print-button {
        background: #3498db;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 5px;
        font-size: 14px;
        cursor: pointer;
        margin: 20px auto;
        display: block;
        width: 100%;
        max-width: 300px;
    }
    
    @media (min-width: 768px) {
        .print-button {
            padding: 15px 30px;
            font-size: 14pt;
            width: auto;
        }
    }
    
    .print-button:hover {
        background: #2980b9;
    }
    
    .footer {
        text-align: center;
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid #ddd;
        color: #7f8c8d;
        font-size: 10pt;
    }
    
    @media (max-width: 767px) {
        .page-break { display: none; }
        h2 { font-size: 18px; margin-top: 25px; }
        h3 { font-size: 16px; }
        .methodology { padding: 15px; }
        .methodology h2 { font-size: 18px; }
        .methodology h3 { font-size: 16px; }
        .footer { font-size: 12px; }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>A58 Tilburg</h1>
            <div class="subtitle">Emissie en Geluid Analyse Rapport</div>
            <div class="subtitle">Impact van elektrificatie en bandtechnologie (2025-2030)</div>
        </div>

```
    <button class="print-button no-print" onclick="window.print()">📄 Printen naar PDF</button>

    <div class="report-info">
        <div class="info-box">
            <h3>Locatie</h3>
            <p><strong>Weg:</strong> A58 bij Tilburg<br>
            <strong>Meetpunt:</strong> 150m achter 12m geluidsscherm<br>
            <strong>Datum analyse:</strong> Juni 2025</p>
        </div>
        <div class="info-box">
            <h3>Verkeerssituatie</h3>
            <p><strong>Intensiteit:</strong> 85.000 voertuigen/etmaal<br>
            <strong>Snelheid:</strong> 100 km/h<br>
            <strong>Bron:</strong> Wegenwiki A58 data</p>
        </div>
    </div>

    <h2>Executieve Samenvatting</h2>
    
    <div class="results-grid">
        <div class="result-box">
            <h3>Huidige Emissie (2025)</h3>
            <div class="big-number" id="emissie2025">10.522</div>
            <p>kg CO₂/dag per km wegvak</p>
            <p>Grootste bijdrage: vrachtwagens (67% van emissies ondanks 5% van verkeer)</p>
        </div>
        <div class="result-box">
            <h3>Huidig Geluidsniveau (2025)</h3>
            <div class="big-number" id="geluid2025">48.3</div>
            <p>dB(A) op meetpunt achter scherm</p>
            <p>Schermdemping: ~10 dB reductie</p>
        </div>
    </div>

    <h2>Voertuigsamenstelling A58 Tilburg</h2>
    <table class="summary-table">
        <thead>
            <tr>
                <th style="width: 20%;">Voertuigtype</th>
                <th style="width: 15%;">Percentage</th>
                <th style="width: 20%;">Aantal/<br>etmaal</th>
                <th style="width: 20%;">CO₂ factor<br><small>(g/km)</small></th>
                <th style="width: 15%;">Geluid<br><small>(dB(A))</small></th>
            </tr>
        </thead>
        <tbody id="voertuigTabel">
            <!-- Wordt ingevuld door JavaScript -->
        </tbody>
    </table>

    <div class="page-break"></div>

    <h2>Projectie 2025-2030</h2>
    
    <div class="chart-container">
        <div class="chart-title">Ontwikkeling CO₂ Emissie (kg/dag per km)</div>
        <canvas id="emissieChart" class="chart-canvas"></canvas>
    </div>

    <div class="chart-container">
        <div class="chart-title">Ontwikkeling Geluidsniveau (dB(A) op meetpunt)</div>
        <canvas id="geluidChart" class="chart-canvas"></canvas>
    </div>

    <h2>Projectieresultaten</h2>
    <table class="summary-table">
        <thead>
            <tr>
                <th style="width: 12%;">Jaar</th>
                <th style="width: 22%;">CO₂ Emissie<br><small>(kg/dag/km)</small></th>
                <th style="width: 16%;">Reductie<br><small>t.o.v. 2025</small></th>
                <th style="width: 22%;">Geluidsniveau<br><small>(dB(A))</small></th>
                <th style="width: 16%;">Reductie<br><small>t.o.v. 2025</small></th>
            </tr>
        </thead>
        <tbody id="projectieTabel">
            <!-- Wordt ingevuld door JavaScript -->
        </tbody>
    </table>

    <div class="methodology">
        <h2>Methodologie en Aannames</h2>
        
        <h3>Verkeersgegevens</h3>
        <ul>
            <li><strong>Verkeersintensiteit:</strong> 85.000 voertuigen/etmaal (bron: Wegenwiki, range 80.000-90.000)</li>
            <li><strong>Voertuigsamenstelling:</strong> 82% personenautos, 12% bestelautos, 5% vrachtwagens, 1% motorfietsen</li>
            <li><strong>Rijsnelheid:</strong> 100 km/h (maximumsnelheid A58)</li>
        </ul>

        <h3>Emissieberekening</h3>
        <ul>
            <li><strong>CO₂ factoren 2025:</strong> Personenautos 120 g/km, bestelautos 180 g/km, vrachtwagens 800 g/km</li>
            <li><strong>Elektrificatie scenario:</strong> Geleidelijke overgang naar elektrisch volgens EU-doelstellingen</li>
            <li><strong>2030 doelstelling:</strong> 100% nieuwe personenautos elektrisch, 50% bestel, 20% vracht</li>
        </ul>

        <h3>Geluidsberekening</h3>
        <ul>
            <li><strong>Basisniveaus:</strong> Personenautos 72 dB(A), vrachtwagens 78 dB(A) op 7.5m</li>
            <li><strong>Afstandsdemping:</strong> -20*log₁₀(afstand/7.5m) = -26.0 dB</li>
            <li><strong>Schermdemping:</strong> ~10 dB voor 12m scherm op 150m afstand</li>
            <li><strong>Bandverbetering:</strong> 2-3 dB reductie rolgeluid door technologie-ontwikkeling</li>
        </ul>

        <h3>Beperkingen</h3>
        <ul>
            <li>Weercondities en wegdektype niet meegenomen</li>
            <li>Vereenvoudigde schermberekening (geen diffractie-effecten)</li>
            <li>Elektrificatie tempo afhankelijk van beleidsuitvoering</li>
            <li>Verkeersgroei niet geprojecteerd</li>
        </ul>
    </div>

    <div class="footer">
        <p>Rapport gegenereerd op: <span id="datum"></span></p>
        <p>Analyse uitgevoerd met Claude AI - Gebaseerd op openbare verkeersdata</p>
    </div>
</div>

<script>
    // Basisgegevens
    const huidigeIntensiteit = 85000;
    
    const voertuigSamenstelling = {
        'Personenautos': 0.82,
        'Bestelautos': 0.12,
        'Vrachtwagens': 0.05,
        'Motorfietsen': 0.01
    };

    const emissieFactoren = {
        2025: { 'Personenautos': 120, 'Bestelautos': 180, 'Vrachtwagens': 800, 'Motorfietsen': 95 },
        2026: { 'Personenautos': 105, 'Bestelautos': 170, 'Vrachtwagens': 780, 'Motorfietsen': 90 },
        2027: { 'Personenautos': 88, 'Bestelautos': 155, 'Vrachtwagens': 760, 'Motorfietsen': 85 },
        2028: { 'Personenautos': 70, 'Bestelautos': 135, 'Vrachtwagens': 740, 'Motorfietsen': 80 },
        2029: { 'Personenautos': 52, 'Bestelautos': 115, 'Vrachtwagens': 720, 'Motorfietsen': 75 },
        2030: { 'Personenautos': 35, 'Bestelautos': 95, 'Vrachtwagens': 700, 'Motorfietsen': 70 }
    };

    const geluidsniveaus = {
        2025: { 'Personenautos': 72, 'Bestelautos': 74, 'Vrachtwagens': 78, 'Motorfietsen': 76 },
        2026: { 'Personenautos': 71.5, 'Bestelautos': 73.5, 'Vrachtwagens': 77.5, 'Motorfietsen': 75.5 },
        2027: { 'Personenautos': 71, 'Bestelautos': 73, 'Vrachtwagens': 77, 'Motorfietsen': 75 },
        2028: { 'Personenautos': 70.5, 'Bestelautos': 72.5, 'Vrachtwagens': 76.5, 'Motorfietsen': 74.5 },
        2029: { 'Personenautos': 70, 'Bestelautos': 72, 'Vrachtwagens': 76, 'Motorfietsen': 74 },
        2030: { 'Personenautos': 69.5, 'Bestelautos': 71.5, 'Vrachtwagens': 75.5, 'Motorfietsen': 73.5 }
    };

    // Bereken emissies
    function berekenEmissies(jaar) {
        let totaalEmissie = 0;
        const emissiePerType = {};
        
        Object.keys(voertuigSamenstelling).forEach(type => {
            const aantalVoertuigen = huidigeIntensiteit * voertuigSamenstelling[type];
            const emissie = (emissieFactoren[jaar][type] * aantalVoertuigen) / 1000;
            emissiePerType[type] = emissie;
            totaalEmissie += emissie;
        });
        
        return { totaal: totaalEmissie, perType: emissiePerType };
    }

    // Bereken geluid
    function berekenGeluid(jaar) {
        let totaalGeluid = 0;
        const afstand = 150;
        const schermDemping = -10;
        
        Object.keys(voertuigSamenstelling).forEach(type => {
            const aantalVoertuigen = huidigeIntensiteit * voertuigSamenstelling[type];
            const basisGeluid = geluidsniveaus[jaar][type];
            
            const afstandsCorr = -20 * Math.log10(afstand / 7.5);
            const gecorrigeerdNiveau = basisGeluid + afstandsCorr + schermDemping;
            const voertuigenPerUur = aantalVoertuigen / 24;
            const verkeersGeluid = gecorrigeerdNiveau + 10 * Math.log10(voertuigenPerUur);
            
            totaalGeluid += Math.pow(10, verkeersGeluid / 10);
        });
        
        return 10 * Math.log10(totaalGeluid);
    }

    // Vul tabellen
    function vulVoertuigTabel() {
        const tbody = document.getElementById('voertuigTabel');
        const emissies2025 = berekenEmissies(2025);
        
        tbody.innerHTML = Object.keys(voertuigSamenstelling).map(type => {
            const percentage = (voertuigSamenstelling[type] * 100).toFixed(0);
            const aantal = Math.round(huidigeIntensiteit * voertuigSamenstelling[type]).toLocaleString();
            const emisieFactor = emissieFactoren[2025][type];
            const geluidNiveau = geluidsniveaus[2025][type];
            
            return `
                <tr>
                    <td>${type}</td>
                    <td>${percentage}%</td>
                    <td>${aantal}</td>
                    <td>${emisieFactor}</td>
                    <td>${geluidNiveau}</td>
                </tr>
            `;
        }).join('');
    }

    function vulProjectieTabel() {
        const tbody = document.getElementById('projectieTabel');
        const jaren = [2025, 2026, 2027, 2028, 2029, 2030];
        const emissie2025 = berekenEmissies(2025).totaal;
        const geluid2025 = berekenGeluid(2025);
        
        tbody.innerHTML = jaren.map(jaar => {
            const emissie = berekenEmissies(jaar).totaal;
            const geluid = berekenGeluid(jaar);
            const emissieReductie = ((emissie2025 - emissie) / emissie2025 * 100).toFixed(1);
            const geluidReductie = (geluid2025 - geluid).toFixed(1);
            
            return `
                <tr>
                    <td>${jaar}</td>
                    <td>${Math.round(emissie).toLocaleString()}</td>
                    <td>${jaar === 2025 ? '-' : '-' + emissieReductie + '%'}</td>
                    <td>${geluid.toFixed(1)}</td>
                    <td>${jaar === 2025 ? '-' : '-' + geluidReductie + ' dB'}</td>
                </tr>
            `;
        }).join('');
    }

    // Maak charts
    function createEmissieChart() {
        const ctx = document.getElementById('emissieChart').getContext('2d');
        const jaren = [2025, 2026, 2027, 2028, 2029, 2030];
        const data = jaren.map(jaar => Math.round(berekenEmissies(jaar).totaal));
        
        // Responsive height based on screen size
        const isMobile = window.innerWidth < 768;
        ctx.canvas.height = isMobile ? 150 : 300;
        
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: jaren,
                datasets: [{
                    label: 'CO₂ Emissie (kg/dag/km)',
                    data: data,
                    borderColor: '#e74c3c',
                    backgroundColor: 'rgba(231, 76, 60, 0.1)',
                    fill: true,
                    tension: 0.3,
                    pointRadius: isMobile ? 4 : 6,
                    pointHoverRadius: isMobile ? 6 : 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                aspectRatio: isMobile ? 2.5 : 2,
                scales: {
                    y: {
                        beginAtZero: false,
                        title: {
                            display: true,
                            text: 'kg CO₂/dag per km',
                            font: {
                                size: isMobile ? 10 : 12
                            }
                        },
                        ticks: {
                            font: {
                                size: isMobile ? 9 : 11
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: isMobile ? 9 : 11
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }

    function createGeluidChart() {
        const ctx = document.getElementById('geluidChart').getContext('2d');
        const jaren = [2025, 2026, 2027, 2028, 2029, 2030];
        const data = jaren.map(jaar => berekenGeluid(jaar).toFixed(1));
        
        // Responsive height based on screen size
        const isMobile = window.innerWidth < 768;
        ctx.canvas.height = isMobile ? 150 : 300;
        
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: jaren,
                datasets: [{
                    label: 'Geluidsniveau (dB(A))',
                    data: data,
                    borderColor: '#3498db',
                    backgroundColor: 'rgba(52, 152, 219, 0.1)',
                    fill: true,
                    tension: 0.3,
                    pointRadius: isMobile ? 4 : 6,
                    pointHoverRadius: isMobile ? 6 : 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                aspectRatio: isMobile ? 2.5 : 2,
                scales: {
                    y: {
                        min: 46,
                        max: 49,
                        title: {
                            display: true,
                            text: 'dB(A)',
                            font: {
                                size: isMobile ? 10 : 12
                            }
                        },
                        ticks: {
                            font: {
                                size: isMobile ? 9 : 11
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: isMobile ? 9 : 11
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }

    // Initialiseer alles
    document.addEventListener('DOMContentLoaded', function() {
        // Vul datum
        document.getElementById('datum').textContent = new Date().toLocaleDateString('nl-NL');
        
        // Vul tabellen
        vulVoertuigTabel();
        vulProjectieTabel();
        
        // Update hoofdcijfers
        const emissies2025 = berekenEmissies(2025);
        const geluid2025 = berekenGeluid(2025);
        document.getElementById('emissie2025').textContent = Math.round(emissies2025.totaal).toLocaleString();
        document.getElementById('geluid2025').textContent = geluid2025.toFixed(1);
        
        // Maak charts met delay voor proper rendering
        setTimeout(() => {
            createEmissieChart();
            createGeluidChart();
        }, 100);
    });

    // Handle window resize for responsive charts
    let resizeTimeout;
    window.addEventListener('resize', function() {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
            // Destroy and recreate charts on significant resize
            Chart.getChart('emissieChart')?.destroy();
            Chart.getChart('geluidChart')?.destroy();
            createEmissieChart();
            createGeluidChart();
        }, 300);
    });
</script>
```

</body>
</html>